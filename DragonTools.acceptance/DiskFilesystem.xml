<?xml version="1.0" encoding="utf-8" ?>

<TestVectors>

  <FreeTests>
  
    <!-- DragonDos -->
    <Free>
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>175104</freespace>
    </Free>

    <Free>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>10752</freespace>
    </Free>

    <Free>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>10752</freespace>
    </Free>

    <Free>
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>175104</freespace>
    </Free>

    <Free>
      <diskimage>dragondos-empty-1s-40t.dmk</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>175104</freespace>
    </Free>

    <Free>
      <diskimage>dragondos-empty-2s-40t.dmk</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>359424</freespace>
    </Free>

    <Free>
      <diskimage>dragondos-empty-1s-80t.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>359424</freespace>
    </Free>

    <Free>
      <diskimage>dragondos-empty-2s-40t.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>359424</freespace>
    </Free>

    <Free>
      <diskimage>dragondos-empty-2s-80t.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <freespace>728064</freespace>
    </Free>

    <!-- OS9 -->
    <Free>
      <diskimage>os9-empty.vdk</diskimage>
      <filesystem>os9</filesystem>
      <freespace>177664</freespace>
    </Free>

    <Free>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <freespace>48896</freespace>
    </Free>

    <Free>
      <diskimage>os9-system.hfe</diskimage>
      <filesystem>os9</filesystem>
      <freespace>48896</freespace>
    </Free>

    <!-- RS-DOS -->
    <Free>
      <diskimage>rsdos-empty.dsk</diskimage>
      <filesystem>rsdos</filesystem>
      <freespace>156672</freespace>
    </Free>

    <Free>
      <diskimage>rsdos-demos01.dsk</diskimage>
      <filesystem>rsdos</filesystem>
      <freespace>59904</freespace>
    </Free>

  </FreeTests>

  
  <ListFilesTests>
    
    <!-- DragonDos -->
    <ListFiles>
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <filelist></filelist>
    </ListFiles>

    <ListFiles>
      <diskimage>dragondos-empty-1s-40t.dmk</diskimage>
      <filesystem>dragondos</filesystem>
      <filelist></filelist>
    </ListFiles>

    <ListFiles>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <filelist>NOTABENE.BIN DRYBONES.BIN DANCER.BIN BARREL.BIN GARDEN.BIN ORGANIST.BIN SWAN.BIN QUARTETT.BIN</filelist>
    </ListFiles>

    <ListFiles>
      <diskimage>dragondos-tunes.dmk</diskimage>
      <filesystem>dragondos</filesystem>
      <filelist>NOTABENE.BIN DRYBONES.BIN DANCER.BIN BARREL.BIN GARDEN.BIN ORGANIST.BIN SWAN.BIN QUARTETT.BIN</filelist>
    </ListFiles>

    <ListFiles>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <filelist>NOTABENE.BIN DRYBONES.BIN DANCER.BIN BARREL.BIN GARDEN.BIN ORGANIST.BIN SWAN.BIN QUARTETT.BIN</filelist>
    </ListFiles>

    <!-- OS9 -->
    <ListFiles>
      <diskimage>os9-empty.vdk</diskimage>
      <filesystem>os9</filesystem>
      <filelist>. ..</filelist>
    </ListFiles>

    <ListFiles>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <filelist>.. . OS9Boot CMDS SYS DEFS startup RUN32 RUN51</filelist>
    </ListFiles>

    <ListFiles>
      <diskimage>os9-system.hfe</diskimage>
      <filesystem>os9</filesystem>
      <filelist>.. . OS9Boot CMDS SYS DEFS startup RUN32 RUN51</filelist>
    </ListFiles>

    <!-- FLEX -->
    <ListFiles>
      <diskimage>flex-system.vdk</diskimage>
      <filesystem>flex</filesystem>
      <filelist>FLEX.SYS ERRORS.SYS PRINT.SYS SERIAL.SYS APPEND.CMD ASN.CMD BACKUP.CMD BAUD.CMD BUILD.CMD CAT.CMD COPY.CMD CS.CMD DATE.CMD DELETE.CMD DRIVES.CMD EXEC.CMD H.CMD I.CMD JUMP.CMD LINK.CMD LIST.CMD       NEWDISK.CMD O.CMD P.CMD PROT.CMD RENAME.CMD S.CMD SAVE.CMD SAVE.LOW SDC.CMD STEP.CMD TTYSET.CMD VERIFY.CMD VERSION.CMD XOUT.CMD STARTUP.TXT WELCOME.TXT DEMO1.TXT CS.ITA CS.UK CS.FRA CS.GER CS.DEN CS.SWE CS.USA CS.SPA CSTEST.TXT SERSYS.TXT</filelist>
    </ListFiles>


    <!-- RS-DOS -->
    <ListFiles>
      <diskimage>rsdos-empty.dsk</diskimage>
      <filesystem>rsdos</filesystem>
      <filelist></filelist>
    </ListFiles>
    
    <ListFiles>
      <diskimage>rsdos-demos01.dsk</diskimage>
      <filesystem>rsdos</filesystem>
      <filelist>SPACEDEM.BIN DANCER.BAS DANCER.BIN GLASDEMO.BIN LINEDEM2.BIN MPATDEMO.BIN STICKS.BIN 28.BAS 3GOONS.BAS DEMO4CC3.BAS FUNDEMO.BAS GETSMART.BAS RSDEMO.BAS SINX.BAS SPINNERS.BAS</filelist>
    </ListFiles>

  </ListFilesTests>


  <FileExistsTests>
    
    <!-- DragonDos -->
    <FileExists>
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>FOO.BAR</file>
      <exists>false</exists>
    </FileExists>

    <FileExists>
      <diskimage>dragondos-empty-1s-40t.dmk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>FOO.BAR</file>
      <exists>false</exists>
    </FileExists>

    <FileExists>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>FOO.BAR</file>
      <exists>false</exists>
    </FileExists>

    <FileExists>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>SWAN.BIN</file>
      <exists>true</exists>
    </FileExists>

    <FileExists>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <file>FOO.BAR</file>
      <exists>false</exists>
    </FileExists>

    <FileExists>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <file>SWAN.BIN</file>
      <exists>true</exists>
    </FileExists>

    <!-- OS9 -->
    <FileExists>
      <diskimage>os9-empty.vdk</diskimage>
      <filesystem>os9</filesystem>
      <file>foo.bar</file>
      <exists>false</exists>
    </FileExists>

    <FileExists>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <file>foo.bar</file>
      <exists>false</exists>
    </FileExists>

    <FileExists>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <file>startup</file>
      <exists>true</exists>
    </FileExists>

    <FileExists>
      <diskimage>os9-system.hfe</diskimage>
      <filesystem>os9</filesystem>
      <file>foo.bar</file>
      <exists>false</exists>
    </FileExists>

    <FileExists>
      <diskimage>os9-system.hfe</diskimage>
      <filesystem>os9</filesystem>
      <file>startup</file>
      <exists>true</exists>
    </FileExists>

    <!-- FLEX -->
    <FileExists>
      <diskimage>flex-system.vdk</diskimage>
      <filesystem>flex</filesystem>
      <file>FLEX.SYS</file>
      <exists>true</exists>
    </FileExists>

    <FileExists>
      <diskimage>flex-system.vdk</diskimage>
      <filesystem>flex</filesystem>
      <file>FOO.BAR</file>
      <exists>false</exists>
    </FileExists>


    <!-- RS-DOS -->
    <FileExists>
      <diskimage>rsdos-demos01.dsk</diskimage>
      <filesystem>rsdos</filesystem>
      <file>FOO.BAR</file>
      <exists>false</exists>
    </FileExists>

    <FileExists>
      <diskimage>rsdos-demos01.dsk</diskimage>
      <filesystem>rsdos</filesystem>
      <file>SPINNERS.BAS</file>
      <exists>true</exists>
    </FileExists>

    <FileExists>
      <diskimage>rsdos-demos01.dsk</diskimage>
      <filesystem>rsdos</filesystem>
      <file>DANCER.BIN</file>
      <exists>true</exists>
    </FileExists>

  </FileExistsTests>


  <IsValidFilenameTests>
    
    <!-- DragonDos -->
    <IsValidFilename>
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>FOO.BAR</file>
      <valid>true</valid>
    </IsValidFilename>

    <IsValidFilename>
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>FOO-BAR.BAR</file>
      <valid>true</valid>
    </IsValidFilename>

    <IsValidFilename>
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>42FOO.BAR</file>
      <valid>true</valid>
    </IsValidFilename>

    <IsValidFilename>   <!-- Extension is too long -->
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>FOO.BARZ</file>
      <valid>false</valid>
    </IsValidFilename>

    <IsValidFilename>    <!-- Filename is too long -->
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <file>FOOBARFOO.BAR</file>
      <valid>false</valid>
    </IsValidFilename>
    
    <!-- OS9 -->
    
  </IsValidFilenameTests>


  <DeleteFileTests>
    
    <!-- DragonDos -->
    <DeleteFile>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <filename>DRYBONES.BIN</filename>
    </DeleteFile>

    <DeleteFile>
      <diskimage>dragondos-tunes.dmk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <filename>DRYBONES.BIN</filename>
    </DeleteFile>

    <DeleteFile>   <!-- File does not exist -->
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <filename>FOO.BAS</filename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileNotFoundException</exception>
    </DeleteFile>

    <DeleteFile>      <!-- Filesystem is write protected -->
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>true</writeprotected>
      <filename>DRYBONES.BIN</filename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FilesystemNotWriteableException</exception>
    </DeleteFile>

    <DeleteFile>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <filename>DRYBONES.BIN</filename>
    </DeleteFile>

    <DeleteFile>
      <!-- File does not exist -->
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <filename>FOO.BAS</filename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileNotFoundException</exception>
    </DeleteFile>

    <DeleteFile>
      <!-- Filesystem is write protected -->
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>true</writeprotected>
      <filename>DRYBONES.BIN</filename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FilesystemNotWriteableException</exception>
    </DeleteFile>

  </DeleteFileTests>


  <RenameFileTests>
    
    <!-- DragonDos -->
    <RenameFile>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <oldfilename>DRYBONES.BIN</oldfilename>
      <newfilename>FOO.BAR</newfilename>
    </RenameFile>

    <RenameFile>
      <description>File does not exist</description>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <oldfilename>FOO.BAS</oldfilename>
      <newfilename>FOOBAR.BAS</newfilename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileNotFoundException</exception>
    </RenameFile>

    <RenameFile> 
      <description>Filesystem is write protected</description>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>true</writeprotected>
      <oldfilename>DRYBONES.BIN</oldfilename>
      <newfilename>FOO.BAR</newfilename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FilesystemNotWriteableException</exception>
    </RenameFile>

    <RenameFile> 
      <description>Target filename already exists</description>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <oldfilename>DRYBONES.BIN</oldfilename>
      <newfilename>DANCER.BIN</newfilename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileExistsException</exception>
    </RenameFile>

    <RenameFile> 
      <description>Target filename is invalid</description>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <oldfilename>DRYBONES.BIN</oldfilename>
      <newfilename>FOOBARFOOBAR.FOO</newfilename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.InvalidFilenameException</exception>
    </RenameFile>

    <RenameFile>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <oldfilename>DRYBONES.BIN</oldfilename>
      <newfilename>FOO.BAR</newfilename>
    </RenameFile>

    <RenameFile>
      <description>File does not exist</description>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <oldfilename>FOO.BAS</oldfilename>
      <newfilename>FOOBAR.BAS</newfilename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileNotFoundException</exception>
    </RenameFile>

    <RenameFile>
      <description>Filesystem is write protected</description>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>true</writeprotected>
      <oldfilename>DRYBONES.BIN</oldfilename>
      <newfilename>FOO.BAR</newfilename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FilesystemNotWriteableException</exception>
    </RenameFile>

    <RenameFile>
      <description>Target filename already exists</description>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <oldfilename>DRYBONES.BIN</oldfilename>
      <newfilename>DANCER.BIN</newfilename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileExistsException</exception>
    </RenameFile>

    <RenameFile>
      <description>Target filename is invalid</description>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <writeprotected>false</writeprotected>
      <oldfilename>DRYBONES.BIN</oldfilename>
      <newfilename>FOOBARFOOBAR.FOO</newfilename>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.InvalidFilenameException</exception>
    </RenameFile>

  </RenameFileTests>


  <ReadFileTests>
    
    <!-- DragonDos -->
    <ReadFile>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <filename>DRYBONES.BIN</filename>
      <length>28490</length>
      <filetype>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.DragonDos.DragonDosFile</filetype>
      <exception/>
      </ReadFile>

      <ReadFile>
        <description>File does not exist</description>
        <diskimage>dragondos-tunes.vdk</diskimage>
        <filesystem>dragondos</filesystem>
        <filename>FOO.BAR</filename>
        <length>0</length>
        <filetype/>
        <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileNotFoundException</exception>
      </ReadFile>

    <ReadFile>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <filename>DRYBONES.BIN</filename>
      <length>28490</length>
      <filetype>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.DragonDos.DragonDosFile</filetype>
      <exception/>
    </ReadFile>

    <ReadFile>
      <description>File does not exist</description>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <filename>FOO.BAR</filename>
      <length>0</length>
      <filetype/>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileNotFoundException</exception>
    </ReadFile>


    <!-- OS-9 -->

    <ReadFile>
      <description>Normal data file</description>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <filename>startup</filename>
      <length>38</length>
      <filetype>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.OS9.OS9DataFile</filetype>
      <exception/>
    </ReadFile>

    <ReadFile>
      <description>Module file</description>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <filename>os9boot</filename>
      <length>12172</length>
      <filetype>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.OS9.OS9ModuleFile</filetype>
      <exception/>
    </ReadFile>

    <ReadFile>
      <description>File does not exist</description>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <filename>foobar</filename>
      <length>0</length>
      <filetype></filetype>
      <exception>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.FileNotFoundException</exception>
    </ReadFile>

    <ReadFile>
      <description>File in subdirectory</description>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <filename>sys/errmsg</filename>
      <length>3172</length>
      <filetype>RolfMichelsen.Dragon.DragonTools.IO.Filesystem.OS9.OS9DataFile</filetype>
      <exception/>
    </ReadFile>
    
  </ReadFileTests>
  
  
  <CheckTests>
    
    <!-- DragonDos -->
    <Check>
      <diskimage>dragondos-empty.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <valid>true</valid>
    </Check>

    <Check>
      <diskimage>dragondos-empty-1s-40t.dmk</diskimage>
      <filesystem>dragondos</filesystem>
      <valid>true</valid>
    </Check>

    <Check>
      <diskimage>dragondos-empty-1s-80t.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <valid>true</valid>
    </Check>

    <Check>
      <diskimage>dragondos-empty-2s-40t.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <valid>true</valid>
    </Check>

    <Check>
      <diskimage>dragondos-empty-2s-80t.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <valid>true</valid>
    </Check>

    <Check>
      <diskimage>dragondos-tunes.vdk</diskimage>
      <filesystem>dragondos</filesystem>
      <valid>true</valid>
    </Check>

    <Check>
      <diskimage>dragondos-tunes.hfe</diskimage>
      <filesystem>dragondos</filesystem>
      <valid>true</valid>
    </Check>

    <!-- OS9 -->
    <Check>
      <diskimage>os9-empty.vdk</diskimage>
      <filesystem>os9</filesystem>
      <valid>true</valid>
    </Check>

    <Check>
      <diskimage>os9-system.vdk</diskimage>
      <filesystem>os9</filesystem>
      <valid>true</valid>
    </Check>
    
    
    <!-- RS-DOS -->
    <Check>
      <diskimage>rsdos-demos01.dsk</diskimage>
      <filesystem>rsdos</filesystem>
      <valid>true</valid>
    </Check>

  </CheckTests>


  <InitializeTests>
    
    <!-- DragonDos -->
    <Initialize>
      <filesystem>dragondos</filesystem>
      <heads>1</heads>
      <tracks>40</tracks>
      <sectors>18</sectors>
      <sectorsize>256</sectorsize>
      <freespace>175104</freespace>
    </Initialize>

    <Initialize description="Duble sided, 40 tracks per side">
      <filesystem>dragondos</filesystem>
      <heads>2</heads>
      <tracks>40</tracks>
      <sectors>18</sectors>
      <sectorsize>256</sectorsize>
      <freespace>359424</freespace>
    </Initialize>

    <Initialize description="Single sided, 80 tracks per side">
      <filesystem>dragondos</filesystem>
      <heads>1</heads>
      <tracks>80</tracks>
      <sectors>18</sectors>
      <sectorsize>256</sectorsize>
      <freespace>359424</freespace>
    </Initialize>

    <Initialize description="Duble sided, 80 tracks per side">
      <filesystem>dragondos</filesystem>
      <heads>2</heads>
      <tracks>80</tracks>
      <sectors>18</sectors>
      <sectorsize>256</sectorsize>
      <freespace>728064</freespace>
    </Initialize>

  </InitializeTests>
  
</TestVectors>